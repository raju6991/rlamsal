"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7564],{52421:(e,t,r)=>{r.d(t,{A:()=>td,Fo:()=>te,RV:()=>ey,Zi:()=>eN,f7:()=>eT,o$:()=>tg,rL:()=>ev});var a=r(4224),n=r.n(a),o=r(98583),i=r.n(o),s=r(68872),l=r.n(s),d=r(12115),c=r(44627),u=r(44823),f=r(75182),h=r(5701),g=r(47650);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var m=0;class E{constructor(){this.id="".concat(m++)}}var w=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,C=new WeakMap,D=new WeakMap,y=new WeakMap,O=new WeakMap,S=new WeakMap,B=new WeakMap,F=new WeakMap,K=new WeakMap,P=new WeakMap,M=new WeakMap,T=new WeakMap,A=new WeakMap,R=new WeakMap,L=new WeakMap,W=new WeakMap,N=new WeakMap,j=new WeakMap,Q=Symbol("placeholder"),I=Symbol("mark-placeholder"),q=globalThis.Text,U=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,z=e=>V(e)&&8===e.nodeType,H=e=>V(e)&&1===e.nodeType,V=e=>{var t=U(e);return!!t&&e instanceof t.Node},_=e=>{var t=e&&e.anchorNode&&U(e.anchorNode);return!!t&&e instanceof t.Selection},Y=e=>V(e)&&3===e.nodeType,$=(e,t,r)=>{for(var{childNodes:a}=e,n=a[t],o=t,i=!1,s=!1;(z(n)||H(n)&&0===n.childNodes.length||H(n)&&"false"===n.getAttribute("contenteditable"))&&(!i||!s);){if(o>=a.length){i=!0,o=t-1,r="backward";continue}if(o<0){s=!0,o=t+1,r="forward";continue}n=a[o],t=o,o+="forward"===r?1:-1}return[n,t]},X=(e,t,r)=>{var[a]=$(e,t,r);return a},J=e=>{var t="";if(Y(e)&&e.nodeValue)return e.nodeValue;if(H(e)){for(var r of Array.from(e.childNodes))t+=J(r);var a=getComputedStyle(e).getPropertyValue("display");("block"===a||"list"===a||"BR"===e.tagName)&&(t+="\n")}return t},Z=/data-slate-fragment="(.+?)"/m,G=(e,t,r)=>{var{target:a}=t;if(H(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:n}=ev.getWindow(e);if(n.contains(a))return ev.hasDOMNode(e,a,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var n of t)if(n===a||n.contains(a))return!0;for(var o of r)if(o===a||o.contains(a))return!0});return!!o&&o!==t&&G(e,o,r)},ee=parseInt(d.version.split(".")[0],10)>=17,et="u">typeof navigator&&"u">typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,er="u">typeof navigator&&/Mac OS X/.test(navigator.userAgent),ea="u">typeof navigator&&/Android/.test(navigator.userAgent),en="u">typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),eo="u">typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ei="u">typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),es="u">typeof navigator&&/Chrome/i.test(navigator.userAgent),el="u">typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),ed=ea&&"u">typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),ec="u">typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),eu="u">typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),ef="u">typeof navigator&&/.*Wechat/.test(navigator.userAgent),eh="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,eg=(!el||!ed)&&!ei&&"u">typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,ev={isComposing:e=>!!K.get(e),getWindow(e){var t=k.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=O.get(t);return r||(r=new E,O.set(t,r)),r},findPath(e,t){for(var r=[],a=t;;){var n=b.get(a);if(null==n)if(u.KE.isEditor(a))return r;else break;var o=w.get(a);if(null==o)break;r.unshift(o),a=n}throw Error("Unable to find the path for Slate node: ".concat(u.h6.stringify(t)))},findDocumentOrShadowRoot(e){var t=ev.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!F.get(e),isReadOnly:e=>!!B.get(e),blur(e){var t=ev.toDOMNode(e,e),r=ev.findDocumentOrShadowRoot(e);F.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=ev.toDOMNode(e,e),r=ev.findDocumentOrShadowRoot(e);F.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=ev.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.gB.deselect(e)},hasDOMNode(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=a,o=ev.toDOMNode(e,e);try{r=H(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!n||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=S.get(e),a=u.KE.isEditor(t)?x.get(e):null==r?void 0:r.get(ev.findKey(e,t));if(!a)throw Error("Cannot resolve a DOM node from Slate node: ".concat(u.h6.stringify(t)));return a},toDOMPoint(e,t){var[r]=u.KE.node(e,t.path),a=ev.toDOMNode(e,r);u.KE.void(e,{at:t})&&(t={path:t.path,offset:0});for(var n=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<n.length;i++){var s=n[i],l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:d}=l.textContent,c=s.getAttribute("data-slate-length"),f=o+(null==c?d:parseInt(c,10)),h=n[i+1];if(t.offset===f&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var g,v,p=h.childNodes[0];g=[p instanceof q?p:h,null!=(v=h.textContent)&&v.startsWith("\uFEFF")?1:0];break}if(t.offset<=f){g=[l,Math.min(d,Math.max(0,t.offset-o))];break}o=f}}if(!g)throw Error("Cannot resolve a DOM point from Slate point: ".concat(u.h6.stringify(t)));return g},toDOMRange(e,t){var{anchor:r,focus:a}=t,n=u.Q6.isBackward(t),o=ev.toDOMPoint(e,r),i=u.Q6.isCollapsed(t)?o:ev.toDOMPoint(e,a),s=ev.getWindow(e).document.createRange(),[l,d]=n?i:o,[c,f]=n?o:i,h=!!(H(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),g=!!(H(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,h?1:d),s.setEnd(c,g?1:f),s},toSlateNode(e,t){var r=H(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?D.get(r):null;if(!a)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:a,clientY:n,target:o}=t;if(null==a||null==n)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=ev.toSlateNode(e,t.target),s=ev.findPath(e,i);if(u.Hg.isElement(i)&&u.KE.isVoid(e,i)){var l=o.getBoundingClientRect(),d=e.isInline(i)?a-l.left<l.left+l.width-a:n-l.top<l.top+l.height-n,c=u.KE.point(e,s,{edge:d?"start":"end"}),f=d?u.KE.before(e,c):u.KE.after(e,c);if(f)return u.KE.range(e,f)}var{document:h}=ev.getWindow(e);if(h.caretRangeFromPoint)r=h.caretRangeFromPoint(a,n);else{var g=h.caretPositionFromPoint(a,n);g&&((r=h.createRange()).setStart(g.offsetNode,g.offset),r.setEnd(g.offsetNode,g.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ev.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:a,suppressThrow:n}=r,[o,i]=a?t:(e=>{var[t,r]=e;if(H(t)&&t.childNodes.length){var a=r===t.childNodes.length,n=a?r-1:r;for([t,n]=$(t,n,a?"backward":"forward"),a=n<r;H(t)&&t.childNodes.length;){var o=a?t.childNodes.length-1:0;t=X(t,o,a?"backward":"forward")}r=a&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),s=o.parentNode,l=null,d=0;if(s){var c,f,h=ev.toDOMNode(e,e),g=s.closest('[data-slate-void="true"]'),v=g&&h.contains(g)?g:null,p=s.closest("[data-slate-leaf]"),m=null;if(p){if(l=p.closest('[data-slate-node="text"]')){var E=ev.getWindow(e).document.createRange();E.setStart(l,0),E.setEnd(o,i);var w=E.cloneContents();[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(ea&&!a&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=w.textContent.length,m=l}}else if(v){for(var b=v.querySelectorAll("[data-slate-leaf]"),k=0;k<b.length;k++){var x=b[k];if(ev.hasDOMNode(e,x)){p=x;break}}p?(l=p.closest('[data-slate-node="text"]'),d=(m=p).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&ea&&"z"===m.getAttribute("data-slate-zero-width")&&null!=(c=m.textContent)&&c.startsWith("\uFEFF")&&(s.hasAttribute("data-slate-zero-width")||en&&null!=(f=m.textContent)&&f.endsWith("\n\n"))&&d--}if(ea&&!l&&!a){var C=s.hasAttribute("data-slate-node")?s:s.closest("[data-slate-node]");if(C&&ev.hasDOMNode(e,C,{editable:!0})){var D=ev.toSlateNode(e,C),{path:y,offset:O}=u.KE.start(e,ev.findPath(e,D));return C.querySelector("[data-slate-leaf]")||(O=i),{path:y,offset:O}}}if(!l){if(n)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var S=ev.toSlateNode(e,l);return{path:ev.findPath(e,S),offset:d}},toSlateRange(e,t,r){var a,n,o,i,s,l,{exactMatch:d,suppressThrow:c}=r;if((_(t)?t.anchorNode:t.startContainer)&&(_(t)?(a=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset,s=es&&(e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1})(a)?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(a=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset,s=t.collapsed)),null==a||null==o||null==n||null==i)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&(o=a,i=(null==(l=a.textContent)?void 0:l.length)||0);var f=ev.toSlatePoint(e,[a,n],{exactMatch:d,suppressThrow:c});if(!f)return null;var h=s?f:ev.toSlatePoint(e,[o,i],{exactMatch:d,suppressThrow:c});if(!h)return null;if(en&&!s&&a!==o){var g=u.KE.isEnd(e,f,f.path),v=u.KE.isStart(e,h,h.path);g&&(f=u.KE.after(e,f)||f),v&&(h=u.KE.before(e,h)||h)}var p={anchor:f,focus:h};return u.Q6.isExpanded(p)&&u.Q6.isForward(p)&&H(o)&&u.KE.void(e,{at:p.focus,mode:"highest"})&&(p=u.KE.unhangRange(e,p,{voids:!0})),p},hasRange(e,t){var{anchor:r,focus:a}=t;return u.KE.hasPath(e,r.path)&&u.KE.hasPath(e,a.path)},hasTarget:(e,t)=>V(t)&&ev.hasDOMNode(e,t),hasEditableTarget:(e,t)=>V(t)&&ev.hasDOMNode(e,t,{editable:!0}),hasSelectableTarget:(e,t)=>ev.hasEditableTarget(e,t)||ev.isTargetInsideNonReadonlyVoid(e,t),isTargetInsideNonReadonlyVoid(e,t){if(B.get(e))return!1;var r=ev.hasTarget(e,t)&&ev.toSlateNode(e,t);return u.Hg.isElement(r)&&u.KE.isVoid(e,r)},androidScheduleFlush(e){var t;null==(t=T.get(e))||t()},androidPendingDiffs:e=>L.get(e)},ep=["anchor","focus"],em=["anchor","focus"],eE=(e,t)=>{var r=p(e,ep),a=p(t,em);return e[Q]===t[Q]&&Object.keys(r).length===Object.keys(a).length&&Object.keys(r).every(e=>a.hasOwnProperty(e)&&r[e]===a[e])},ew=eh?d.useLayoutEffect:d.useEffect,eb=e=>{var{isLast:t,leaf:r,parent:a,text:n}=e,o=ey(),i=ev.findPath(o,n),s=u.wA.parent(i),l=!0===r[I];return o.isVoid(a)?d.createElement(eC,{length:u.bP.string(a).length}):""!==r.text||a.children[a.children.length-1]!==n||o.isInline(a)||""!==u.KE.string(o,s)?""===r.text?d.createElement(eC,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement(ek,{isTrailing:!0,text:r.text}):d.createElement(ek,{text:r.text}):d.createElement(eC,{isLineBreak:!0,isMarkPlaceholder:l})},ek=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,d.useRef)(null),n=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(n);return ew(()=>{var e=n();a.current&&a.current.textContent!==e&&(a.current.textContent=e)}),d.createElement(ex,{ref:a},o)},ex=(0,d.memo)((0,d.forwardRef)((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children))),eC=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=e,n={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return a&&(n["data-slate-mark-placeholder"]=!0),d.createElement("span",Object.assign({},n),ea&&r?null:"\uFEFF",r?d.createElement("br",null):null)},eD=(0,d.createContext)(null),ey=()=>{var e=(0,d.useContext)(eD);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},eO=d.memo(e=>{var{leaf:t,isLast:r,text:a,parent:n,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(eS,Object.assign({},e))}=e,s=(0,d.useRef)(null),l=(0,d.useRef)(null),c=ey(),u=(0,d.useRef)(null);(0,d.useEffect)(()=>()=>{u.current&&u.current.disconnect()},[]),(0,d.useEffect)(()=>{var e=null==l?void 0:l.current;if(e?C.set(c,e):C.delete(c),u.current?(u.current.disconnect(),e&&u.current.observe(e)):e&&(u.current=new(window.ResizeObserver||f.tb)(()=>{var e=j.get(c);null==e||e()}),u.current.observe(e)),!e&&s.current){var t=j.get(c);null==t||t()}return s.current=l.current,()=>{C.delete(c)}},[l,t]);var h=d.createElement(eb,{isLast:r,leaf:t,parent:n,text:a});if(t[Q]){var g={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:l}};h=d.createElement(d.Fragment,null,o(g),h)}return i({attributes:{"data-slate-leaf":!0},children:h,leaf:t,text:a})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.EY.equals(t.leaf,e.leaf)&&t.leaf[Q]===e.leaf[Q]),eS=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r)},eB=d.memo(e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:n,renderLeaf:o,text:i}=e,s=ey(),l=(0,d.useRef)(null),c=u.EY.decorations(i,t),f=ev.findKey(s,i),h=[],g=0;g<c.length;g++){var v=c[g];h.push(d.createElement(eO,{isLast:r&&g===c.length-1,key:"".concat(f.id,"-").concat(g),renderPlaceholder:n,leaf:v,text:i,parent:a,renderLeaf:o}))}var p=(0,d.useCallback)(e=>{var t=S.get(s);e?(null==t||t.set(f,e),y.set(i,e),D.set(e,i)):(null==t||t.delete(f),y.delete(i),l.current&&D.delete(l.current)),l.current=e},[l,s,f,i]);return d.createElement("span",{"data-slate-node":"text",ref:p},h)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(a.anchor.offset!==n.anchor.offset||a.focus.offset!==n.focus.offset||!eE(a,n))return!1}return!0})(t.decorations,e.decorations)),eF=d.memo(e=>{var{decorations:t,element:r,renderElement:a=e=>d.createElement(eK,Object.assign({},e)),renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=ey(),c=eL(),f=l.isInline(r),h=ev.findKey(l,r),g=(0,d.useCallback)(e=>{var t=S.get(l);e?(null==t||t.set(h,e),y.set(r,e),D.set(e,r)):(null==t||t.delete(h),y.delete(r))},[l,h,r]),v=eA({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:s}),p={"data-slate-node":"element",ref:g};if(f&&(p["data-slate-inline"]=!0),!f&&u.KE.hasInlines(l,r)){var m=u.bP.string(r),E=n()(m);"rtl"===E&&(p.dir=E)}if(u.KE.isVoid(l,r)){p["data-slate-void"]=!0,!c&&f&&(p.contentEditable=!1);var[[k]]=u.bP.texts(r);v=d.createElement(f?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(eB,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:k})),w.set(k,0),b.set(k,r)}return a({attributes:p,children:v,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(!u.Q6.equals(a,n)||!eE(a,n))return!1}return!0})(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.Q6.equals(e.selection,t.selection))),eK=e=>{var{attributes:t,children:r,element:a}=e,n=ey().isInline(a)?"span":"div";return d.createElement(n,Object.assign({},t,{style:{position:"relative"}}),r)},eP=(0,d.createContext)(()=>[]),eM=(0,d.createContext)(!1),eT=()=>(0,d.useContext)(eM),eA=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:i}=e,s=(0,d.useContext)(eP),l=ey(),c=ev.findPath(l,r),f=[],h=u.Hg.isElement(r)&&!l.isInline(r)&&u.KE.hasInlines(l,r),g=0;g<r.children.length;g++){var v=c.concat(g),p=r.children[g],m=ev.findKey(l,p),E=u.KE.range(l,v),k=i&&u.Q6.intersection(E,i),x=s([p,v]);for(var C of t){var D=u.Q6.intersection(C,E);D&&x.push(D)}u.Hg.isElement(p)?f.push(d.createElement(eM.Provider,{key:"provider-".concat(m.id),value:!!k},d.createElement(eF,{decorations:x,element:p,key:m.id,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:k}))):f.push(d.createElement(eB,{decorations:x,key:m.id,isLast:h&&g===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:o,text:p})),w.set(p,g),b.set(p,r)}return f},eR=(0,d.createContext)(!1),eL=()=>(0,d.useContext)(eR),eW=(0,d.createContext)(null),eN=()=>{var e=(0,d.useContext)(eW);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},ej={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},eQ={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},eI={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},eq=e=>{var t=ej[e],r=eQ[e],a=eI[e],n=t&&(0,h.Sn)(t),o=r&&(0,h.Sn)(r),i=a&&(0,h.Sn)(a);return e=>!!(n&&n(e)||er&&o&&o(e)||!er&&i&&i(e))},eU={isBold:eq("bold"),isCompose:eq("compose"),isMoveBackward:eq("moveBackward"),isMoveForward:eq("moveForward"),isDeleteBackward:eq("deleteBackward"),isDeleteForward:eq("deleteForward"),isDeleteLineBackward:eq("deleteLineBackward"),isDeleteLineForward:eq("deleteLineForward"),isDeleteWordBackward:eq("deleteWordBackward"),isDeleteWordForward:eq("deleteWordForward"),isExtendBackward:eq("extendBackward"),isExtendForward:eq("extendForward"),isExtendLineBackward:eq("extendLineBackward"),isExtendLineForward:eq("extendLineForward"),isItalic:eq("italic"),isMoveLineBackward:eq("moveLineBackward"),isMoveLineForward:eq("moveLineForward"),isMoveWordBackward:eq("moveWordBackward"),isMoveWordForward:eq("moveWordForward"),isRedo:eq("redo"),isSoftBreak:eq("insertSoftBreak"),isSplitBlock:eq("splitBlock"),isTransposeCharacter:eq("transposeCharacter"),isUndo:eq("undo")},ez={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class eH extends d.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null==(e=this.mutationObserver)||e.observe(t.current,ez)}componentDidMount(){var e,t,{receivedUserInput:r}=this.props,a=this.context;this.manager=(e=[],{registerMutations:t=>{if(r.current){var n=t.filter(e=>G(a,e,t));e.push(...n)}},restoreDOM:function(){e.length>0&&(e.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),t())},clear:t=()=>{e=[]}}),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,a,n=null==(e=this.mutationObserver)?void 0:e.takeRecords();return null!=n&&n.length&&(null==(a=this.manager)||a.registerMutations(n)),null==(t=this.mutationObserver)||t.disconnect(),null==(r=this.manager)||r.restoreDOM(),null}componentDidUpdate(){var e;null==(e=this.manager)||e.clear(),this.observe()}componentWillUnmount(){var e;null==(e=this.mutationObserver)||e.disconnect()}render(){return this.props.children}}eH.contextType=eD;var eV=ea?eH:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)};function e_(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function eY(e,t){var{start:r,end:a,text:n}=t,o=e.slice(r,a),i=function(e,t){for(var r=Math.min(e.length,t.length),a=0;a<r;a++)if(e.charAt(a)!==t.charAt(a))return a;return r}(o,n),s=Math.min(o.length-i,n.length-i),l=function(e,t,r){for(var a=Math.min(e.length,t.length,r),n=0;n<a;n++)if(e.charAt(e.length-n-1)!==t.charAt(t.length-n-1))return n;return a}(o,n,s),d={start:r+i,end:a-l,text:n.slice(i,n.length-l)};return d.start===d.end&&0===d.text.length?null:d}function e$(e,t){var{path:r,offset:a}=t;if(!u.KE.hasPath(e,r))return null;var n=u.bP.get(e,r);if(!u.EY.isText(n))return null;var o=u.KE.above(e,{match:t=>u.Hg.isElement(t)&&u.KE.isBlock(e,t),at:r});if(!o)return null;for(;a>n.text.length;){var i=u.KE.next(e,{at:r,match:u.EY.isText});if(!i||!u.wA.isDescendant(i[1],o[1]))return null;a-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:a}}function eX(e,t){var r=e$(e,t.anchor);if(!r)return null;if(u.Q6.isCollapsed(t))return{anchor:r,focus:r};var a=e$(e,t.focus);return a?{anchor:r,focus:a}:null}function eJ(e,t,r){var a=L.get(e),n=null==a?void 0:a.find(e=>{var{path:r}=e;return u.wA.equals(r,t.path)});if(!n||t.offset<=n.diff.start)return u.bR.transform(t,r,{affinity:"backward"});var{diff:o}=n;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},s=u.bR.transform(i,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.bR.transform(l,r,{affinity:"backward"});return d?"split_node"===r.type&&u.wA.equals(r.path,t.path)&&l.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function eZ(e,t,r){var a=eJ(e,t.anchor,r);if(!a)return null;if(u.Q6.isCollapsed(t))return{anchor:a,focus:a};var n=eJ(e,t.focus,r);return n?{anchor:a,focus:n}:null}function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e1=function(){},e6=["node"];function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var e7={subtree:!0,childList:!0,characterData:!0},e5=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],e4=["text"];function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function e3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e9=e=>d.createElement(d.Fragment,null,eA(e)),te=e=>{var t,r,a,o,s,c,f=(0,d.useCallback)(e=>d.createElement(tt,Object.assign({},e)),[]),{autoFocus:h,decorate:g=tr,onDOMBeforeInput:m,placeholder:E,readOnly:w=!1,renderElement:b,renderLeaf:O,renderPlaceholder:S=f,scrollSelectionIntoView:M=ta,style:q={},as:z="div",disableDefaultStyles:Y=!1}=e,$=p(e,e5),X=eN(),[J,Z]=(0,d.useState)(!1),ee=(0,d.useRef)(null),er=(0,d.useRef)([]),{onUserInput:ei,receivedUserInput:el}=(t=ey(),r=(0,d.useRef)(!1),a=(0,d.useRef)(0),o=(0,d.useCallback)(()=>{if(!r.current){r.current=!0;var e=ev.getWindow(t);e.cancelAnimationFrame(a.current),a.current=e.requestAnimationFrame(()=>{r.current=!1})}},[]),(0,d.useEffect)(()=>()=>cancelAnimationFrame(a.current),[]),{receivedUserInput:r,onUserInput:o}),[,ed]=(0,d.useReducer)(e=>e+1,0);j.set(X,ed),B.set(X,w);var ep=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{ee.current&&h&&ee.current.focus()},[h]);var em=(0,d.useCallback)(l()(()=>{if((ea||!ev.isComposing(X))&&(!ep.isUpdatingSelection||null!=eb&&eb.isFlushing())&&!ep.isDraggingInternally){var e=ev.findDocumentOrShadowRoot(X),{activeElement:t}=e,r=ev.toDOMNode(X,X),a=e.getSelection();if(t===r?(ep.latestElement=t,F.set(X,!0)):F.delete(X),!a)return u.gB.deselect(X);var{anchorNode:n,focusNode:o}=a,i=ev.hasEditableTarget(X,n)||ev.isTargetInsideNonReadonlyVoid(X,n),s=ev.hasEditableTarget(X,o)||ev.isTargetInsideNonReadonlyVoid(X,o);if(i&&s){var l=ev.toSlateRange(X,a,{exactMatch:!1,suppressThrow:!0});l&&(ev.isComposing(X)||null!=eb&&eb.hasPendingChanges()||null!=eb&&eb.isFlushing()?null==eb||eb.handleUserSelect(l):u.gB.select(X,l))}!w||i&&s||u.gB.deselect(X)}},100),[w]),eE=(0,d.useMemo)(()=>i()(em,0),[em]),eb=function(e){var t,{node:r}=e,a=p(e,e6);if(!ea)return null;var n=ey(),o=(t=(0,d.useRef)(!1),(0,d.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=e,n=!1,o=null,i=null,s=null,l=0,d=!1,c=()=>{var e=N.get(t);if(N.delete(t),e){var{selection:r}=t,a=eX(t,e);!a||r&&u.Q6.equals(a,r)||u.gB.select(t,a)}},f=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!m()&&!p())return void c();n||(n=!0,setTimeout(()=>n=!1)),p()&&(n="action");var e=t.selection&&u.KE.rangeRef(t,t.selection,{affinity:"forward"});R.set(t,t.marks),e1("flush",W.get(t),L.get(t));for(var o=m();l=null==(f=L.get(t))?void 0:f[0];){var l,f,h,g=A.get(t);void 0!==g&&(A.delete(t),t.marks=g),g&&!1===d&&(d=null);var v=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(l);t.selection&&u.Q6.equals(t.selection,v)||u.gB.select(t,v),l.diff.text?u.KE.insertText(t,l.diff.text):u.KE.deleteFragment(t),L.set(t,null==(h=L.get(t))?void 0:h.filter(e=>{var{id:t}=e;return t!==l.id})),!function(e,t){var{path:r,diff:a}=t;if(!u.KE.hasPath(e,r))return!1;var n=u.bP.get(e,r);if(!u.EY.isText(n))return!1;if(a.start!==n.text.length||0===a.text.length)return n.text.slice(a.start,a.start+a.text.length)===a.text;var o=u.wA.next(r);if(!u.KE.hasPath(e,o))return!1;var i=u.bP.get(e,o);return u.EY.isText(i)&&i.text.startsWith(a.text)}(t,l)&&(o=!1,W.delete(t),R.delete(t),n="action",N.delete(t),r.cancel(),a.cancel(),null==e||e.unref())}var E=null==e?void 0:e.unref();if(!E||N.get(t)||t.selection&&u.Q6.equals(E,t.selection)||u.gB.select(t,E),p())return void(()=>{var e=W.get(t);if(W.delete(t),e){if(e.at){var r=u.bR.isPoint(e.at)?e$(t,e.at):eX(t,e.at);if(!r)return;var a=u.KE.range(t,r);t.selection&&u.Q6.equals(t.selection,a)||u.gB.select(t,r)}e.run()}})();o&&r(),r.flush(),a.flush(),c();var w=R.get(t);R.delete(t),void 0!==w&&(t.marks=w,t.onChange())},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=C.get(t);if(r){if(m()||e){r.style.display="none";return}r.style.removeProperty("display")}},g=(e,r)=>{var a,n,o,i,s,d,c,f,g=null!=(f=L.get(t))?f:[];L.set(t,g);var v=u.bP.leaf(t,e),p=g.findIndex(t=>u.wA.equals(t.path,e));if(p<0){eY(v.text,r)&&g.push({path:e,diff:r,id:l++}),h();return}var m=(a=v.text,n=g[p].diff,o=Math.min(n.start,r.start),i=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),s=e_(a,n,r),d=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-i),c=s.slice(o,d),eY(a,{start:o,end:Math.max(n.end,r.end-n.text.length+(n.end-n.start)),text:c}));if(!m){g.splice(p,1),h();return}g[p]=e0(e0({},g[p]),{},{diff:m})},v=function(e){var{at:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,N.delete(t),r.cancel(),a.cancel(),p()&&f(),W.set(t,{at:n,run:e}),s=setTimeout(f)},p=()=>!!W.get(t),m=()=>{var e;return!!(null!=(e=L.get(t))&&e.length)},E=e=>{N.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var a=!r||!u.wA.equals(r.anchor.path,e.anchor.path),n=!r||!u.wA.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(a&&d||n)&&(d=!1),(a||m())&&(i=setTimeout(f,200))}},w=()=>{p()||(s=setTimeout(f))};return{flush:f,scheduleFlush:w,hasPendingDiffs:m,hasPendingAction:p,hasPendingChanges:()=>p()||m(),isFlushing:()=>n,handleUserSelect:E,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{K.set(t,!1),f()},25)},handleCompositionStart:e=>{K.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,a=null,n=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(a=ev.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var s=ev.getWindow(t).getSelection();if(!a&&s&&(o=s,a=ev.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),a=null!=(K=a)?K:t.selection){var l=!0;if(r.startsWith("delete")){if(u.Q6.isExpanded(a)){var[c,f]=u.Q6.edges(a);if(u.bP.leaf(t,c.path).text.length===c.offset&&0===f.offset){var h=u.KE.next(t,{at:c.path,match:u.EY.isText});h&&u.wA.equals(h[1],f.path)&&(a={anchor:f,focus:f})}}var p=r.endsWith("Backward")?"backward":"forward",[m,b]=u.Q6.edges(a),[k,x]=u.KE.leaf(t,m.path),C={text:"",start:m.offset,end:b.offset},D=L.get(t),y=null==D?void 0:D.find(e=>u.wA.equals(e.path,x)),O=y?[y.diff,C]:[C];if(0===e_(k.text,...O).length&&(l=!1),u.Q6.isExpanded(a)){if(l&&u.wA.equals(a.anchor.path,a.focus.path)){var S={path:a.anchor.path,offset:m.offset};return E(u.KE.range(t,S,S)),g(a.anchor.path,{text:"",end:b.offset,start:m.offset})}return v(()=>u.KE.deleteFragment(t,{direction:p}),{at:a})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return v(()=>u.KE.deleteFragment(t),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:B}=a;if(l&&u.Q6.isCollapsed(a)){var F=u.bP.leaf(t,B.path);if(B.offset<F.text.length)return g(B.path,{text:"",start:B.offset,end:B.offset+1})}return v(()=>u.KE.deleteForward(t),{at:a});case"deleteContentBackward":var K,P,{anchor:M}=a,T=_(o)?o.isCollapsed:!!(null!=(P=o)&&P.collapsed);if(l&&T&&u.Q6.isCollapsed(a)&&M.offset>0)return g(M.path,{text:"",start:M.offset-1,end:M.offset});return v(()=>u.KE.deleteBackward(t),{at:a});case"deleteEntireSoftLine":return v(()=>{u.KE.deleteBackward(t,{unit:"line"}),u.KE.deleteForward(t,{unit:"line"})},{at:a});case"deleteHardLineBackward":return v(()=>u.KE.deleteBackward(t,{unit:"block"}),{at:a});case"deleteSoftLineBackward":return v(()=>u.KE.deleteBackward(t,{unit:"line"}),{at:a});case"deleteHardLineForward":return v(()=>u.KE.deleteForward(t,{unit:"block"}),{at:a});case"deleteSoftLineForward":return v(()=>u.KE.deleteForward(t,{unit:"line"}),{at:a});case"deleteWordBackward":return v(()=>u.KE.deleteBackward(t,{unit:"word"}),{at:a});case"deleteWordForward":return v(()=>u.KE.deleteForward(t,{unit:"word"}),{at:a});case"insertLineBreak":return v(()=>u.KE.insertSoftBreak(t),{at:a});case"insertParagraph":return v(()=>u.KE.insertBreak(t),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if((null==n?void 0:n.constructor.name)==="DataTransfer")return v(()=>ev.insertData(t,n),{at:a});var R=null!=n?n:"";if(A.get(t)&&(R=R.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(R)&&(R=R.slice(0,-1)),R.includes("\n"))return v(()=>{var e=R.split("\n");e.forEach((r,a)=>{r&&u.KE.insertText(t,r),a!==e.length-1&&u.KE.insertSoftBreak(t)})},{at:a});if(u.wA.equals(a.anchor.path,a.focus.path)){var[W,N]=u.Q6.edges(a),j={start:W.offset,end:N.offset,text:R};if(R&&d&&"insertCompositionText"===r){var Q=d.start+d.text.search(/\S|$/);j.start+j.text.search(/\S|$/)===Q+1&&j.end===d.start+d.text.length?(j.start-=1,d=null,w()):d=!1}else d="insertText"===r&&(null===d?j:!!(d&&u.Q6.isCollapsed(a))&&d.end+d.text.length===W.offset&&e0(e0({},d),{},{text:d.text+R}));if(l)return void g(W.path,j)}return v(()=>u.KE.insertText(t,R),{at:a})}}},handleKeyDown:e=>{m()||(h(!0),setTimeout(h))},handleDomMutations:e=>{if(!(m()||p())&&e.some(r=>G(t,r,e))){var r;null==(r=j.get(t))||r()}},handleInput:()=>{(p()||!m())&&f()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},a)));return!function(e,t,r){var[a]=(0,d.useState)(()=>new MutationObserver(t));ew(()=>{a.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),()=>a.disconnect()},[])}(r,i.handleDomMutations,e7),T.set(n,i.scheduleFlush),o&&i.flush(),i}({node:ee,onDOMSelectionChange:em,scheduleOnDOMSelectionChange:eE});ew(()=>{ee.current&&(e=U(ee.current))?(k.set(X,e),x.set(X,ee.current),y.set(X,ee.current),D.set(ee.current,X)):y.delete(X);var e,{selection:t}=X,r=ev.findDocumentOrShadowRoot(X).getSelection();if(!(!r||!ev.isFocused(X)||null!=eb&&eb.hasPendingAction())){var a=e=>{var a="None"!==r.type;if(t||a){var n=x.get(X),o=!1;if(n.contains(r.anchorNode)&&n.contains(r.focusNode)&&(o=!0),a&&o&&t&&!e){var i=ev.toSlateRange(X,r,{exactMatch:!0,suppressThrow:!0});if(i&&u.Q6.equals(i,t)){if(!ep.hasMarkPlaceholder)return;var s,{anchorNode:l}=r;if(null!=l&&null!=(s=l.parentElement)&&s.hasAttribute("data-slate-mark-placeholder"))return}}if(t&&!ev.hasRange(X,t)){X.selection=ev.toSlateRange(X,r,{exactMatch:!1,suppressThrow:!0});return}ep.isUpdatingSelection=!0;var d=t&&ev.toDOMRange(X,t);return d?(u.Q6.isBackward(t)?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset),M(X,d)):r.removeAllRanges(),d}},n=a(),o=(null==eb?void 0:eb.isFlushing())==="action";if(!ea||!o)return void setTimeout(()=>{n&&en&&ev.toDOMNode(X,X).focus(),ep.isUpdatingSelection=!1});var i=null,s=requestAnimationFrame(()=>{if(o){var e=e=>{try{ev.toDOMNode(X,X).focus(),a(e)}catch(e){}};e(),i=setTimeout(()=>{e(!0),ep.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(s),i&&clearTimeout(i)}}});var ek=(0,d.useCallback)(e=>{if(ei(),!w&&ev.hasEditableTarget(X,e.target)&&!to(e,m)){if(eb)return eb.handleDOMBeforeInput(e);eE.flush(),em.flush();var{selection:t}=X,{inputType:r}=e,a=e.dataTransfer||e.data||void 0,n="insertCompositionText"===r||"deleteCompositionText"===r;if(!(n&&ev.isComposing(X))){var o=!1;if("insertText"===r&&t&&u.Q6.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,X.marks&&(o=!1);var{anchor:i}=t,[s,l]=ev.toDOMPoint(X,i),d=null==(h=s.parentElement)?void 0:h.closest("a"),c=ev.getWindow(X);if(o&&d&&ev.hasDOMNode(X,d)){var f,h,g,v,p=null==c?void 0:c.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();p===s&&(null==(v=p.textContent)?void 0:v.length)===l&&(o=!1)}if(o&&s.parentElement&&(null==c||null==(g=c.getComputedStyle(s.parentElement))?void 0:g.whiteSpace)==="pre"){var E=u.KE.above(X,{at:i.path,match:e=>u.Hg.isElement(e)&&u.KE.isBlock(X,e)});E&&u.bP.string(E[0]).includes("	")&&(o=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[b]=e.getTargetRanges();if(b){var k=ev.toSlateRange(X,b,{exactMatch:!1,suppressThrow:!1});if(!t||!u.Q6.equals(t,k)){o=!1;var x=!n&&X.selection&&u.KE.rangeRef(X,X.selection);u.gB.select(X,k),x&&P.set(X,x)}}}if(!n){if(o||e.preventDefault(),t&&u.Q6.isExpanded(t)&&r.startsWith("delete")){var C=r.endsWith("Backward")?"backward":"forward";u.KE.deleteFragment(X,{direction:C});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.KE.deleteFragment(X);break;case"deleteContent":case"deleteContentForward":u.KE.deleteForward(X);break;case"deleteContentBackward":u.KE.deleteBackward(X);break;case"deleteEntireSoftLine":u.KE.deleteBackward(X,{unit:"line"}),u.KE.deleteForward(X,{unit:"line"});break;case"deleteHardLineBackward":u.KE.deleteBackward(X,{unit:"block"});break;case"deleteSoftLineBackward":u.KE.deleteBackward(X,{unit:"line"});break;case"deleteHardLineForward":u.KE.deleteForward(X,{unit:"block"});break;case"deleteSoftLineForward":u.KE.deleteForward(X,{unit:"line"});break;case"deleteWordBackward":u.KE.deleteBackward(X,{unit:"word"});break;case"deleteWordForward":u.KE.deleteForward(X,{unit:"word"});break;case"insertLineBreak":u.KE.insertSoftBreak(X);break;case"insertParagraph":u.KE.insertBreak(X);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&ev.isComposing(X)&&(Z(!1),K.set(X,!1)),(null==a?void 0:a.constructor.name)==="DataTransfer"?ev.insertData(X,a):"string"==typeof a&&(o?er.current.push(()=>u.KE.insertText(X,a)):u.KE.insertText(X,a))}var D=null==(f=P.get(X))?void 0:f.unref();P.delete(X),!D||X.selection&&u.Q6.equals(X.selection,D)||u.gB.select(X,D)}}}},[w,m]),ex=(0,d.useCallback)(e=>{null==e?(em.cancel(),eE.cancel(),x.delete(X),y.delete(X),ee.current&&eg&&ee.current.removeEventListener("beforeinput",ek)):eg&&e.addEventListener("beforeinput",ek),ee.current=e},[ee,ek,em,eE]);ew(()=>{var e=ev.getWindow(X);return e.document.addEventListener("selectionchange",eE),()=>{e.document.removeEventListener("selectionchange",eE)}},[eE]);var eC=g([X,[]]);if(E&&1===X.children.length&&1===Array.from(u.bP.texts(X)).length&&""===u.bP.string(X)&&!J){var eD=u.KE.start(X,[]);eC.push({[Q]:!0,placeholder:E,anchor:eD,focus:eD})}var{marks:eO}=X;if(ep.hasMarkPlaceholder=!1,X.selection&&u.Q6.isCollapsed(X.selection)&&eO){var{anchor:eS}=X.selection,eB=u.bP.leaf(X,eS.path),eF=p(eB,e4);if(!u.EY.equals(eB,eO,{loose:!0})){ep.hasMarkPlaceholder=!0;var eK=Object.fromEntries(Object.keys(eF).map(e=>[e,null]));eC.push(e3(e3(e3({[I]:!0},eK),eO),{},{anchor:eS,focus:eS}))}}(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=X;if(e){var{anchor:t}=e,r=u.bP.leaf(X,t.path);if(eO&&!u.EY.equals(r,eO,{loose:!0}))return void A.set(X,eO)}A.delete(X)})});var eM=null==(s=C.get(X))||null==(c=s.getBoundingClientRect())?void 0:c.height;return d.createElement(eR.Provider,{value:w},d.createElement(eP.Provider,{value:g},d.createElement(eV,{node:ee,receivedUserInput:el},d.createElement(z,Object.assign({role:w?void 0:"textbox","aria-multiline":!w||void 0},$,{spellCheck:(!!eg||!eh)&&$.spellCheck,autoCorrect:eg||!eh?$.autoCorrect:"false",autoCapitalize:eg||!eh?$.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!w,zindex:-1,suppressContentEditableWarning:!0,ref:ex,style:e3(e3({},Y?{}:e3({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},eM?{minHeight:eM}:{})),q),onBeforeInput:(0,d.useCallback)(e=>{if(!eg&&!w&&!tn(e,$.onBeforeInput)&&ev.hasSelectableTarget(X,e.target)&&(e.preventDefault(),!ev.isComposing(X))){var t=e.data;u.KE.insertText(X,t)}},[w]),onInput:(0,d.useCallback)(e=>{if(!tn(e,$.onInput)){if(eb)return void eb.handleInput();for(var t of er.current)t();er.current=[]}},[]),onBlur:(0,d.useCallback)(e=>{if(w||ep.isUpdatingSelection||!ev.hasSelectableTarget(X,e.target)||tn(e,$.onBlur))return;var t=ev.findDocumentOrShadowRoot(X);if(ep.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==ev.toDOMNode(X,X)&&!(H(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&V(r)&&ev.hasDOMNode(X,r)){var a=ev.toSlateNode(X,r);if(u.Hg.isElement(a)&&!X.isVoid(a))return}if(eo){var n=t.getSelection();null==n||n.removeAllRanges()}F.delete(X)}}},[w,$.onBlur]),onClick:(0,d.useCallback)(e=>{if(ev.hasTarget(X,e.target)&&!tn(e,$.onClick)&&V(e.target)){var t=ev.toSlateNode(X,e.target),r=ev.findPath(X,t);if(u.KE.hasPath(X,r)&&u.bP.get(X,r)===t){if(3===e.detail&&r.length>=1){var a=r;if(!(u.Hg.isElement(t)&&u.KE.isBlock(X,t))){var n,o=u.KE.above(X,{match:e=>u.Hg.isElement(e)&&u.KE.isBlock(X,e),at:r});a=null!=(n=null==o?void 0:o[1])?n:r.slice(0,1)}var i=u.KE.range(X,a);u.gB.select(X,i);return}if(!w){var s=u.KE.start(X,r),l=u.KE.end(X,r),d=u.KE.void(X,{at:s}),c=u.KE.void(X,{at:l});if(d&&c&&u.wA.equals(d[1],c[1])){var f=u.KE.range(X,s);u.gB.select(X,f)}}}}},[w,$.onClick]),onCompositionEnd:(0,d.useCallback)(e=>{if(ev.hasSelectableTarget(X,e.target)&&(ev.isComposing(X)&&(Z(!1),K.set(X,!1)),null==eb||eb.handleCompositionEnd(e),!tn(e,$.onCompositionEnd)&&!ea&&!eo&&!ec&&!et&&!ef&&!eu)&&e.data){var t=A.get(X);A.delete(X),void 0!==t&&(R.set(X,X.marks),X.marks=t),u.KE.insertText(X,e.data);var r=R.get(X);R.delete(X),void 0!==r&&(X.marks=r)}},[$.onCompositionEnd]),onCompositionUpdate:(0,d.useCallback)(e=>{!ev.hasSelectableTarget(X,e.target)||tn(e,$.onCompositionUpdate)||ev.isComposing(X)||(Z(!0),K.set(X,!0))},[$.onCompositionUpdate]),onCompositionStart:(0,d.useCallback)(e=>{if(ev.hasSelectableTarget(X,e.target)&&(null==eb||eb.handleCompositionStart(e),!tn(e,$.onCompositionStart)&&!ea)){Z(!0);var{selection:t}=X;if(t){if(u.Q6.isExpanded(t))return void u.KE.deleteFragment(X);var r=u.KE.above(X,{match:e=>u.Hg.isElement(e)&&u.KE.isInline(X,e),mode:"highest"});if(r){var[,a]=r;if(u.KE.isEnd(X,t.anchor,a)){var n=u.KE.after(X,a);u.gB.setSelection(X,{anchor:n,focus:n})}}}}},[$.onCompositionStart]),onCopy:(0,d.useCallback)(e=>{ev.hasSelectableTarget(X,e.target)&&!tn(e,$.onCopy)&&(e.preventDefault(),ev.setFragmentData(X,e.clipboardData,"copy"))},[$.onCopy]),onCut:(0,d.useCallback)(e=>{if(!w&&ev.hasSelectableTarget(X,e.target)&&!tn(e,$.onCut)){e.preventDefault(),ev.setFragmentData(X,e.clipboardData,"cut");var{selection:t}=X;if(t)if(u.Q6.isExpanded(t))u.KE.deleteFragment(X);else{var r=u.bP.parent(X,t.anchor.path);u.KE.isVoid(X,r)&&u.gB.delete(X)}}},[w,$.onCut]),onDragOver:(0,d.useCallback)(e=>{if(ev.hasTarget(X,e.target)&&!tn(e,$.onDragOver)){var t=ev.toSlateNode(X,e.target);u.Hg.isElement(t)&&u.KE.isVoid(X,t)&&e.preventDefault()}},[$.onDragOver]),onDragStart:(0,d.useCallback)(e=>{if(!w&&ev.hasTarget(X,e.target)&&!tn(e,$.onDragStart)){var t=ev.toSlateNode(X,e.target),r=ev.findPath(X,t);if(u.Hg.isElement(t)&&u.KE.isVoid(X,t)||u.KE.void(X,{at:r,voids:!0})){var a=u.KE.range(X,r);u.gB.select(X,a)}ep.isDraggingInternally=!0,ev.setFragmentData(X,e.dataTransfer,"drag")}},[w,$.onDragStart]),onDrop:(0,d.useCallback)(e=>{if(!w&&ev.hasTarget(X,e.target)&&!tn(e,$.onDrop)){e.preventDefault();var t=X.selection,r=ev.findEventRange(X,e),a=e.dataTransfer;u.gB.select(X,r),ep.isDraggingInternally&&t&&!u.Q6.equals(t,r)&&!u.KE.void(X,{at:r,voids:!0})&&u.gB.delete(X,{at:t}),ev.insertData(X,a),ev.isFocused(X)||ev.focus(X)}ep.isDraggingInternally=!1},[w,$.onDrop]),onDragEnd:(0,d.useCallback)(e=>{!w&&ep.isDraggingInternally&&$.onDragEnd&&ev.hasTarget(X,e.target)&&$.onDragEnd(e),ep.isDraggingInternally=!1},[w,$.onDragEnd]),onFocus:(0,d.useCallback)(e=>{if(!w&&!ep.isUpdatingSelection&&ev.hasEditableTarget(X,e.target)&&!tn(e,$.onFocus)){var t=ev.toDOMNode(X,X);if(ep.latestElement=ev.findDocumentOrShadowRoot(X).activeElement,en&&e.target!==t)return void t.focus();F.set(X,!0)}},[w,$.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!w&&ev.hasEditableTarget(X,e.target)){null==eb||eb.handleKeyDown(e);var{nativeEvent:t}=e;if(ev.isComposing(X)&&!1===t.isComposing&&(K.set(X,!1),Z(!1)),!(tn(e,$.onKeyDown)||ev.isComposing(X))){var{selection:r}=X,a=X.children[null!==r?r.focus.path[0]:0],o="rtl"===n()(u.bP.string(a));if(eU.isRedo(t)){e.preventDefault(),"function"==typeof X.redo&&X.redo();return}if(eU.isUndo(t)){e.preventDefault(),"function"==typeof X.undo&&X.undo();return}if(eU.isMoveLineBackward(t)){e.preventDefault(),u.gB.move(X,{unit:"line",reverse:!0});return}if(eU.isMoveLineForward(t)){e.preventDefault(),u.gB.move(X,{unit:"line"});return}if(eU.isExtendLineBackward(t)){e.preventDefault(),u.gB.move(X,{unit:"line",edge:"focus",reverse:!0});return}if(eU.isExtendLineForward(t)){e.preventDefault(),u.gB.move(X,{unit:"line",edge:"focus"});return}if(eU.isMoveBackward(t)){e.preventDefault(),r&&u.Q6.isCollapsed(r)?u.gB.move(X,{reverse:!o}):u.gB.collapse(X,{edge:"start"});return}if(eU.isMoveForward(t)){e.preventDefault(),r&&u.Q6.isCollapsed(r)?u.gB.move(X,{reverse:o}):u.gB.collapse(X,{edge:"end"});return}if(eU.isMoveWordBackward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)&&u.gB.collapse(X,{edge:"focus"}),u.gB.move(X,{unit:"word",reverse:!o});return}if(eU.isMoveWordForward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)&&u.gB.collapse(X,{edge:"focus"}),u.gB.move(X,{unit:"word",reverse:o});return}if(eg){if((es||eo)&&r&&(eU.isDeleteBackward(t)||eU.isDeleteForward(t))&&u.Q6.isCollapsed(r)){var i=u.bP.parent(X,r.anchor.path);if(u.Hg.isElement(i)&&u.KE.isVoid(X,i)&&(u.KE.isInline(X,i)||u.KE.isBlock(X,i))){e.preventDefault(),u.KE.deleteBackward(X,{unit:"block"});return}}}else{if(eU.isBold(t)||eU.isItalic(t)||eU.isTransposeCharacter(t))return void e.preventDefault();if(eU.isSoftBreak(t)){e.preventDefault(),u.KE.insertSoftBreak(X);return}if(eU.isSplitBlock(t)){e.preventDefault(),u.KE.insertBreak(X);return}if(eU.isDeleteBackward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"backward"}):u.KE.deleteBackward(X);return}if(eU.isDeleteForward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"forward"}):u.KE.deleteForward(X);return}if(eU.isDeleteLineBackward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"backward"}):u.KE.deleteBackward(X,{unit:"line"});return}if(eU.isDeleteLineForward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"forward"}):u.KE.deleteForward(X,{unit:"line"});return}if(eU.isDeleteWordBackward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"backward"}):u.KE.deleteBackward(X,{unit:"word"});return}if(eU.isDeleteWordForward(t)){e.preventDefault(),r&&u.Q6.isExpanded(r)?u.KE.deleteFragment(X,{direction:"forward"}):u.KE.deleteForward(X,{unit:"word"});return}}}}},[w,$.onKeyDown]),onPaste:(0,d.useCallback)(e=>{let t;!w&&ev.hasEditableTarget(X,e.target)&&!tn(e,$.onPaste)&&(!eg||(t=e.nativeEvent).clipboardData&&""!==t.clipboardData.getData("text/plain")&&1===t.clipboardData.types.length||eo)&&(e.preventDefault(),ev.insertData(X,e.clipboardData))},[w,$.onPaste])}),d.createElement(e9,{decorations:eC,node:X,renderElement:b,renderPlaceholder:S,renderLeaf:O,selection:X.selection})))))},tt=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r,ea&&d.createElement("br",null))},tr=()=>[],ta=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.Q6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.A)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},tn=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},to=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},ti=(0,d.createContext)(!1),ts=(0,d.createContext)({}),tl=["editor","children","onChange","value"],td=e=>{var t,r,a,{editor:n,children:o,onChange:i,value:s}=e,l=p(e,tl),c=(0,d.useRef)(!1),[f,h]=d.useState(()=>{if(!u.bP.isNodeList(s))throw Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(u.h6.stringify(s)));if(!u.KE.isEditor(n))throw Error("[Slate] editor is invalid! You passed: ".concat(u.h6.stringify(n)));return n.children=s,Object.assign(n,l),{v:0,editor:n}}),{selectorContext:g,onChange:v}=(t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:n}).current,a=(0,d.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[]),{selectorContext:(0,d.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:a}),m=(0,d.useCallback)(()=>{i&&i(n.children),h(e=>({v:e.v+1,editor:n})),v(n)},[i]);(0,d.useEffect)(()=>(M.set(n,m),()=>{M.set(n,()=>{}),c.current=!0}),[m]);var[E,w]=(0,d.useState)(ev.isFocused(n));return(0,d.useEffect)(()=>{w(ev.isFocused(n))}),ew(()=>{var e=()=>w(ev.isFocused(n));return ee?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),d.createElement(ts.Provider,{value:g},d.createElement(eW.Provider,{value:f},d.createElement(eD.Provider,{value:f.editor},d.createElement(ti.Provider,{value:E},o))))},tc=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},tu=(e,t,r)=>{var a=ev.toDOMRange(e,t).getBoundingClientRect(),n=ev.toDOMRange(e,r).getBoundingClientRect();return tc(a,n)&&tc(n,a)};function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",{apply:r,onChange:a,deleteBackward:n,addMark:o,removeMark:i}=e;return S.set(e,new WeakMap),e.addMark=(t,r)=>{var a,n;null==(a=T.get(e))||a(),!A.get(e)&&null!=(n=L.get(e))&&n.length&&A.set(e,null),R.delete(e),o(t,r)},e.removeMark=t=>{var r;!A.get(e)&&null!=(r=L.get(e))&&r.length&&A.set(e,null),R.delete(e),i(t)},e.deleteBackward=t=>{if("line"!==t)return n(t);if(e.selection&&u.Q6.isCollapsed(e.selection)){var r=u.KE.above(e,{match:t=>u.Hg.isElement(t)&&u.KE.isBlock(e,t),at:e.selection});if(r){var[,a]=r,o=u.KE.range(e,a,e.selection.anchor),i=((e,t)=>{var r=u.KE.range(e,u.Q6.end(t)),a=Array.from(u.KE.positions(e,{at:t})),n=0,o=a.length,i=Math.floor(o/2);if(tu(e,u.KE.range(e,a[n]),r))return u.KE.range(e,a[n],r);if(a.length<2)return u.KE.range(e,a[a.length-1],r);for(;i!==a.length&&i!==n;)tu(e,u.KE.range(e,a[i]),r)?o=i:n=i,i=Math.floor((n+o)/2);return u.KE.range(e,a[o],r)})(e,o);u.Q6.isCollapsed(i)||u.gB.delete(e,{at:i})}}},e.apply=t=>{var a,n=[],o=L.get(e);if(null!=o&&o.length){var i=o.map(e=>(function(e,t){var{path:r,diff:a,id:n}=e;switch(t.type){case"insert_text":if(!u.wA.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset<=a.start)return{diff:{start:t.text.length+a.start,end:t.text.length+a.end,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end+t.text.length,text:a.text},id:n,path:r};case"remove_text":if(!u.wA.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset+t.text.length<=a.start)return{diff:{start:a.start-t.text.length,end:a.end-t.text.length,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end-t.text.length,text:a.text},id:n,path:r};case"split_node":if(!u.wA.equals(t.path,r)||t.position>=a.end)return{diff:a,id:n,path:u.wA.transform(r,t,{affinity:"backward"})};if(t.position>a.start)return{diff:{start:a.start,end:Math.min(t.position,a.end),text:a.text},id:n,path:r};return{diff:{start:a.start-t.position,end:a.end-t.position,text:a.text},id:n,path:u.wA.transform(r,t,{affinity:"forward"})};case"merge_node":if(!u.wA.equals(t.path,r))return{diff:a,id:n,path:u.wA.transform(r,t)};return{diff:{start:a.start+t.position,end:a.end+t.position,text:a.text},id:n,path:u.wA.transform(r,t)}}var o=u.wA.transform(r,t);return o?{diff:a,path:o,id:n}:null})(e,t)).filter(Boolean);L.set(e,i)}var s=N.get(e);s&&N.set(e,eZ(e,s,t));var l=W.get(e);if(null!=l&&l.at){var d=u.bR.isPoint(null==l?void 0:l.at)?eJ(e,l.at,t):eZ(e,l.at,t);W.set(e,d?th(th({},l),{},{at:d}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...tv(e,t.path));break;case"set_selection":null==(a=P.get(e))||a.unref(),P.delete(e);break;case"insert_node":case"remove_node":n.push(...tv(e,u.wA.parent(t.path)));break;case"merge_node":n.push(...tv(e,u.wA.previous(t.path)));break;case"move_node":n.push(...tv(e,u.wA.common(u.wA.parent(t.path),u.wA.parent(t.newPath))))}for(var[c,f]of(r(t),n)){var[h]=u.KE.node(e,c);O.set(h,f)}},e.setFragmentData=r=>{var{selection:a}=e;if(a){var[n,o]=u.Q6.edges(a),i=u.KE.void(e,{at:n.path}),s=u.KE.void(e,{at:o.path});if(!u.Q6.isCollapsed(a)||i){var l=ev.toDOMRange(e,a),d=l.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),s){var[f]=s,h=l.cloneRange(),g=ev.toDOMNode(e,f);h.setEndAfter(g),d=h.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),Y(c)){var v=c.ownerDocument.createElement("span");v.style.whiteSpace="pre",v.appendChild(c),d.appendChild(v),c=v}var p=JSON.stringify(e.getFragment()),m=window.btoa(encodeURIComponent(p));c.setAttribute("data-slate-fragment",m),r.setData("application/".concat(t),m);var E=d.ownerDocument.createElement("div");return E.appendChild(d),E.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(E),r.setData("text/html",E.innerHTML),r.setData("text/plain",J(E)),d.ownerDocument.body.removeChild(E),r}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=r=>{var a=r.getData("application/".concat(t))||(e=>{var[,t]=e.getData("text/html").match(Z)||[];return t})(r);if(a){var n=JSON.parse(decodeURIComponent(window.atob(a)));return e.insertFragment(n),!0}return!1},e.insertTextData=t=>{var r=t.getData("text/plain");if(r){var a=r.split(/\r\n|\r|\n/),n=!1;for(var o of a)n&&u.gB.splitNodes(e,{always:!0}),e.insertText(o),n=!0;return!0}return!1},e.onChange=t=>{g.unstable_batchedUpdates(()=>{var r=M.get(e);r&&r(),a(t)})},e},tv=(e,t)=>{var r=[];for(var[a,n]of u.KE.levels(e,{at:t})){var o=ev.findKey(e,a);r.push([n,o])}return r}}}]);